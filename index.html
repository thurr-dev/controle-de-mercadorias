<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Painel Mini Adega</title>
    
    <meta name="theme-color" content="#0d0d0d">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <link rel="apple-touch-icon" href="icone2.png">
    <link rel="manifest" href="manifest.json">
    
    <link rel="stylesheet" href="style.css">

    <script src="https://unpkg.com/html5-qrcode"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<div class="card">
    <h2 style="text-align:center; margin:0 0 15px 0;">ðŸ›’ Frente de Caixa</h2>
    <button class="btn btn-blue" onclick="iniciarLeitor()">ðŸ“· ESCANEAR PRODUTO</button>
    <div id="reader"></div>
    <div id="carrinhoLista"></div>
    <div class="total-venda">Total: <span id="valorTotal">R$ 0,00</span></div>
    <button class="btn btn-green" id="btnFinalizar" style="display:none;" onclick="finalizarVenda()">CONCLUIR VENDA</button>
</div>

<div class="card">
    <h3>ðŸ“‚ Exportar Vendas (Backup)</h3>
    <div style="display: flex; gap: 10px;">
        <button class="btn btn-pdf" onclick="gerarPDF()">ðŸ“„ PDF</button>
        <button class="btn btn-excel" onclick="gerarExcel()">ðŸ“Š EXCEL</button>
    </div>
</div>

<div class="card">
    <h3>ðŸ“¦ Cadastro de Produto</h3>
    <input type="text" id="cad-ean" placeholder="CÃ³digo de Barras" readonly style="background:#111; color:#666;">
    <input type="text" id="cad-nome" placeholder="Nome do Produto">
    <input type="number" id="cad-qtd" placeholder="Qtd em Estoque">
    <input type="number" id="cad-preco" placeholder="PreÃ§o R$">
    <label style="font-size:12px; color:var(--primary); font-weight:bold;">VENCIMENTO (DD/MM/AAAA):</label>
    <input type="text" id="cad-venc" placeholder="Ex: 10/05/2026" maxlength="10" onkeyup="mascaraData(this)">
    <button class="btn btn-blue" onclick="salvarProduto()">CADASTRAR PRODUTO</button>
</div>

<div class="card">
    <h3>ðŸ“‹ Estoque & Validade</h3>
    <div id="listaEstoque" style="overflow-x:auto;"></div>
</div>

<div class="card">
    <h3 onclick="toggleRelatorio()" style="cursor:pointer; display:flex; justify-content:space-between; align-items:center; margin:0;">
        ðŸ“ˆ Verificar relatÃ³rio das semanas <span id="seta-relatorio">â–¼</span>
    </h3>
    <div id="conteudoRelatorio" style="display:none; margin-top:20px;">
        <canvas id="graficoVendas"></canvas>
        <button class="btn btn-excel" style="margin-top:20px; background:#2980b9;" onclick="gerarRelatorioSemanal()">ðŸ“Š BAIXAR RELATÃ“RIO MENSAL/SEMANAL</button>
    </div>
</div>

<script src="script.js"></script>
<script>
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('sw.js').then(() => console.log("PWA Ativo"));
    }
</script>
</body>
</html>
